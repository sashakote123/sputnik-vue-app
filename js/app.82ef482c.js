(function(){"use strict";var e={4900:function(e,t,s){var i=s(3751),r=s(641);function n(e,t,s,i,n,c){const o=(0,r.g2)("MainScreen");return(0,r.uX)(),(0,r.Wv)(o)}var c=s(33),o=s.p+"img/logo.191fb0fa.svg",a=s.p+"img/clear.0371eb88.svg";const l={class:"hello"},u={class:"form",action:""},d={class:"input"},h={class:"form__custom"},p=["value"],v={key:0,class:"events__container"},f={key:1,class:"error"};function y(e,t,s,n,y,m){const _=(0,r.g2)("EventCard");return(0,r.uX)(),(0,r.CE)("div",l,[t[9]||(t[9]=(0,r.Lk)("div",{class:"logo"},[(0,r.Lk)("img",{src:o,alt:"",class:"logo__img"})],-1)),t[10]||(t[10]=(0,r.Lk)("h1",{class:"title"},"Экскурсии по всему миру",-1)),(0,r.Lk)("form",u,[(0,r.Lk)("div",d,[(0,r.bo)((0,r.Lk)("input",{class:"form__input",placeholder:"Введите название экскурсии",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>y.searchQuery=e),onInput:t[1]||(t[1]=(...e)=>m.handleCityChange&&m.handleCityChange(...e))},null,544),[[i.Jo,y.searchQuery]]),(0,r.Lk)("div",{class:"clear",onClick:t[2]||(t[2]=(...e)=>m.clearSearch&&m.clearSearch(...e))},t[6]||(t[6]=[(0,r.Lk)("img",{src:a,alt:""},null,-1)]))]),(0,r.Lk)("div",h,[(0,r.bo)((0,r.Lk)("select",{class:"form__select","onUpdate:modelValue":t[3]||(t[3]=e=>y.selectedCityId=e),onChange:t[4]||(t[4]=(...e)=>m.handleCityChange&&m.handleCityChange(...e))},[t[7]||(t[7]=(0,r.Lk)("option",{class:"select__option",value:"",disabled:""},"Выбрать город",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(y.cities,(e=>((0,r.uX)(),(0,r.CE)("option",{class:"select__option",key:e.id,value:e.id},(0,c.v_)(e.name),9,p)))),128))],544),[[i.u1,y.selectedCityId]])])]),y.isEmpty?((0,r.uX)(),(0,r.CE)("div",f,[t[8]||(t[8]=(0,r.eW)("Поиск не дал результатов ")),(0,r.Lk)("div",{class:"btn",onClick:t[5]||(t[5]=(...e)=>m.clearSearch&&m.clearSearch(...e))},"Сбросить фильтры")])):((0,r.uX)(),(0,r.CE)("div",v,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(y.eventsArray,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id},[(0,r.bF)(_,{img:e.cover_photo.original,score:e.customers_review_rating,name:e.title,price:e.netto_price,reviews:e.reviews},null,8,["img","score","name","price","reviews"])])))),128))]))])}s(8111),s(2489),s(116);var m=s.p+"img/star.c6b046ad.svg";const _={class:"card"},g=["src"],k={class:"card__info"},C={class:"info__score"},b={class:"scores__score"},L={class:"scores__all"},w={class:"info__title"},E={class:"info__price"},A={class:"price__price"};function I(e,t,s,i,n,o){return(0,r.uX)(),(0,r.CE)("div",_,[(0,r.Lk)("img",{class:"card__img",src:s.img,alt:"123"},null,8,g),(0,r.Lk)("div",k,[(0,r.Lk)("div",C,[t[0]||(t[0]=(0,r.Lk)("img",{src:m,alt:""},null,-1)),(0,r.Lk)("div",b,(0,c.v_)(s.score),1),(0,r.Lk)("div",L,"("+(0,c.v_)(s.reviews)+")",1)]),(0,r.Lk)("div",w,(0,c.v_)(s.name),1),(0,r.Lk)("div",E,[(0,r.Lk)("div",A,"от "+(0,c.v_)(s.price),1),t[1]||(t[1]=(0,r.Lk)("div",{class:"price__foot"},"за экскурсию",-1))])])])}var O={name:"EventCard",props:{img:{type:String,required:!0},score:{type:Number},name:{type:String},price:{type:String},reviews:{type:Number}}},S=s(6262);const Q=(0,S.A)(O,[["render",I]]);var X=Q,j={name:"HelloWorld",props:{msg:String},components:{EventCard:X},data(){return{cities:[],products:[],selectedCityId:"",eventsArray:[],searchQuery:"",isEmpty:!1}},methods:{handleCityChange(){if(""===this.searchQuery&&""===this.selectedCityId)this.eventsArray=this.products;else if(""!==this.searchQuery&&""!==this.selectedCityId){const e=this.cities.find((e=>e.id===this.selectedCityId));setTimeout((()=>{const t=this.products.filter((t=>t.city_id===e.region_id&&t.title.toLowerCase().includes(this.searchQuery.toLowerCase())));0===t.length?this.isEmpty=!0:(this.eventsArray=t,this.isEmpty=!1)}),500)}else if(""===this.searchQuery&&""!==this.selectedCityId){const e=this.cities.find((e=>e.id===this.selectedCityId)),t=this.eventsArray.filter((t=>t.city_id===e.region_id));0===t.length?this.isEmpty=!0:this.eventsArray=t}else if(""!==this.searchQuery&&""===this.selectedCityId){const e=this.eventsArray.filter((e=>e.title.toLowerCase().includes(this.searchQuery.toLowerCase())));0===e.length?this.isEmpty=!0:this.eventsArray=e}},clearSearch(){this.searchQuery="",this.selectedCityId="",this.isEmpty=!1,this.eventsArray=this.products}},mounted(){fetch("https://cors-anywhere.herokuapp.com/https://api.sputnik8.com/v1/products?api_key=873fa71c061b0c36d9ad7e47ec3635d9&username=frontend@sputnik8.com").then((e=>e.json())).then((e=>{this.products=e,this.eventsArray=this.products})).catch((e=>console.error(e))),fetch("https://cors-anywhere.herokuapp.com/https://api.sputnik8.com/v1/cities?api_key=873fa71c061b0c36d9ad7e47ec3635d9&username=frontend@sputnik8.com").then((e=>e.json())).then((e=>this.cities=e)).catch((e=>console.error(e)))}};const x=(0,S.A)(j,[["render",y],["__scopeId","data-v-b985deaa"]]);var F=x,T={name:"App",components:{MainScreen:F}};const W=(0,S.A)(T,[["render",n]]);var K=W;(0,i.Ef)(K).mount("#app")}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,i,r,n){if(!i){var c=1/0;for(u=0;u<e.length;u++){i=e[u][0],r=e[u][1],n=e[u][2];for(var o=!0,a=0;a<i.length;a++)(!1&n||c>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[a])}))?i.splice(a--,1):(o=!1,n<c&&(c=n));if(o){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,r,n]}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/sputnik-vue-app/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,n,c=i[0],o=i[1],a=i[2],l=0;if(c.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(a)var u=a(s)}for(t&&t(i);l<c.length;l++)n=c[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},i=self["webpackChunksputnik_vue_app"]=self["webpackChunksputnik_vue_app"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(4900)}));i=s.O(i)})();
//# sourceMappingURL=app.82ef482c.js.map